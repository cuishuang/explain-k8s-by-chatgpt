# File: pkg/controller/garbagecollector/garbagecollector.go

pkg/controller/garbagecollector/garbagecollector.go文件是Kubernetes中的垃圾收集器实现，主要目的是将一个命名空间中与不再需要的各种对象及其相关对象（包括子孙对象）解除引用，将其删除。这些对象可能是由于亲缘关系已被删除但仍保留在Kubernetes集群中，例如，一个命名空间随着其拥有的对象一起被删除，但是这个命名空间有其他的对象依赖于它而未被删除。垃圾收集器将使用识别这些“失踪的亲戚”，并将其删除。

_,enqueuedVirtualDeleteEventErr变量是一个特定类型的error，用于指示虚拟删除事件是否已进入工作队列。namespacedOwnerOfClusterScopedObjectErr是一个特定类型的error，用于指示集群范围内对象是否已定义其所有者命名空间，并且该命名空间是否存在。

GarbageCollector结构体是垃圾收集器的主体，其workQueueItemAction结构体负责处理工作队列中的每个元素，根据元素类型将其分类为尝试删除的元素或孤儿元素，并采取相应的操作。NewGarbageCollector函数在创建新的垃圾收集器时使用，resyncMonitors函数监视对象的资源，Run函数启动垃圾收集器，Sync函数执行与集群的同步，并将其状态存储在etcd中，printDiff函数打印集群计划执行的更新，waitForStopOrTimeout函数等待垃圾收集器停止或超时，并返回错误，IsSynced函数检查垃圾收集器与Kubernetes API Server的同步状态.

runAttemptToDeleteWorker函数尝试在删除对象时执行某些情况，并记录结果。processAttemptToDeleteWorker函数更新此函数所引用区域的删除状态。attemptToDeleteWorker函数执行删除尝试。isDangling函数返回true如果资源是不可删除的。classifyReferences功能将所有引用资源划分为拥有者和依赖项。ownerRefsToUIDs函数将OwnerRef类型的切片转换为UID（用户唯一标识符）类型的切片。attemptToDeleteItem函数从删除队列中获取并处理删除工作项。processDeletingDependentsItem函数执行与删除相关的依赖项的任何工作。orphanDependents函数尝试成为孤儿依赖项。runAttemptToOrphanWorker函数尝试删除主持删除的所有者对象，并将其变成孤儿对象，以允许删除。processAttemptToOrphanWorker函数更新worker尝试进行孤儿化的所有者对象的状态。attemptToOrphanWorker函数执行孤儿化尝试。

GraphHasUID函数检查资源图中是否存在给定UID的资源。GetDeletableResources函数获取所有可删除的对象的UID，并在检查资源之前使用GraphHasUID函数检查它们是否存在。Name函数获取垃圾收集器的名称。

