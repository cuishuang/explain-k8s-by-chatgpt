# File: pkg/controller/volume/attachdetach/cache/desired_state_of_world.go

pkg/controller/volume/attachdetach/cache/desired_state_of_world.go是Kubernetes中一个处理卷和节点的缓存的控制器的核心文件，它管理着Kubernetes集群中所有卷和节点的状态，提供了卷管理逻辑的核心功能。

DesiredStateOfWorld结构体代表了当前Kubernetes集群中的期望状态，它维护了整个集群中所有卷和节点的状态。 VolumeToAttach结构体代表了需要进行挂载的卷，PodToAdd结构体代表了需要添加到节点上的Pod。

NewDesiredStateOfWorld函数用于创建一个新的DesiredStateOfWorld结构体；AddNode函数用于将一个新的节点添加到DesiredStateOfWorld结构中；AddPod函数用于将一个新的Pod添加到DesiredStateOfWorld结构中；DeleteNode函数用于从DesiredStateOfWorld结构中删除一个节点；DeletePod函数用于从DesiredStateOfWorld结构中删除一个Pod；NodeExists函数用于判断指定的节点是否存在；VolumeExists函数用于判断指定的卷是否存在；SetMultiAttachError函数用于设置多次申请挂载卷的错误信息；GetKeepTerminatedPodVolumesForNode函数用于获取已终止的Pod的卷信息；GetVolumesToAttach函数用于获取需要挂载的卷的信息；getPodsFromMap函数用于从PodMap中根据节点名获取Pod列表；GetPodToAdd函数根据节点和PodMap获取PodToAdd信息；GetVolumePodsOnNodes函数用于获取卷已挂载的节点列表。这些函数共同实现了Kubernetes中的卷管理逻辑，确保卷和节点状态的正确性和一致性。

