# File: pkg/volume/util/subpath/subpath_linux.go

在kubernetes项目中，`pkg/volume/util/subpath/subpath_linux.go` 文件是用于实现容器中挂载子路径的功能。它包含了多个结构体和函数，用于处理子路径相关操作。

以下是每个结构体和函数的详细介绍：

1. `subpath`: 这个结构体用于表示一个子路径。它包含了要挂载的源路径、目标路径和其它相关属性。

2. `subpathMount`: 这个结构体表示一个子路径挂载的具体操作，包括源路径、目标路径以及挂载时的一些参数。

3. `subpathUnmount`: 这个结构体表示一个子路径的卸载操作，包括要卸载的目标路径。

4. `New`: 这个函数用于创建一个新的 `subpath` 对象，并返回指向该对象的指针。

5. `CleanSubPaths`: 这个函数用于清理已经存在的子路径。它会卸载目标路径，并删除其中的文件和空目录。

6. `SafeMakeDir`: 这个函数用于安全地创建目标路径的目录。它会检查目标路径是否已经存在，如果不存在则创建目录。

7. `PrepareSafeSubpath`: 这个函数用于准备子路径的目标路径。它会检查目标路径是否已经存在，并在需要时创建目录。

8. `safeOpenSubPath`: 这个函数用于安全地打开子路径。它会检查目标路径是否存在，并返回一个文件描述符。

9. `prepareSubpathTarget`: 这个函数用于准备子路径的目标路径。它会检查目标路径是否存在，并在需要时进行创建。

10. `checkSubPathFileEqual`: 这个函数用于检查子路径中的文件是否与源路径中的文件内容相同。

11. `getSubpathBindTarget`: 这个函数用于获取子路径的绑定目标路径。

12. `doBindSubPath`: 这个函数用于执行子路径的绑定操作。它会将源路径挂载到目标路径上。

13. `doCleanSubPaths`: 这个函数用于执行子路径的清理操作。它会卸载目标路径，并删除其中的文件和空目录。

14. `doCleanSubPath`: 这个函数用于执行单个子路径的清理操作。它会卸载目标路径，并删除其中的文件和空目录。

15. `cleanSubPath`: 这个函数用于清理子路径中的文件和空目录。

16. `removeEmptyDirs`: 这个函数用于删除空目录。

17. `doSafeMakeDir`: 这个函数用于安全地创建目录。它会检查目录是否已经存在，如果不存在则创建目录。

18. `findExistingPrefix`: 这个函数用于查找已存在的前缀。

19. `doSafeOpen`: 这个函数用于安全地打开文件。它会检查文件是否存在，并返回一个文件描述符。

这些结构体和函数共同实现了容器中挂载子路径的功能，包括创建目录、检查文件是否相同、执行挂载和卸载操作等。

